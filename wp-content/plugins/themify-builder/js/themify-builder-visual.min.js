var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,b,m){e!=Array.prototype&&e!=Object.prototype&&(e[b]=m.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var b=0;return $jscomp.iteratorPrototype(function(){return b<e.length?{done:!1,value:e[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.iteratorFromArray=function(e,b){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var m=0,l={next:function(){if(m<e.length){var p=m++;return{value:b(p,e[p]),done:!1}}l.next=function(){return{done:!0,value:void 0}};return l.next()}};l[Symbol.iterator]=function(){return l};return l};
$jscomp.polyfill=function(e,b,m,l){if(b){m=$jscomp.global;e=e.split(".");for(l=0;l<e.length-1;l++){var p=e[l];p in m||(m[p]={});m=m[p]}e=e[e.length-1];l=m[e];b=b(l);b!=l&&null!=b&&$jscomp.defineProperty(m,e,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6-impl","es3");
$jscomp.findInternal=function(e,b,m){e instanceof String&&(e=String(e));for(var l=e.length,p=0;p<l;p++){var c=e[p];if(b.call(m,c,p,e))return{i:p,v:c}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(b,e){return $jscomp.findInternal(this,b,e).v}},"es6-impl","es3");
(function(e){var b=themifybuilderapp,m=[],l=[];b.mode="visual";b.iframe="";b.VisualCache=[];b.id="";b.Mixins.Frontend={render_visual:function(){var c=[],d=[],a=this.el.querySelectorAll("[data-cid]"),a=Array.prototype.slice.call(a);a.unshift(this.el);for(var f=0,g=a.length;f<g;++f){var n=b.Models.Registry.lookup(a[f].getAttribute("data-cid"));if(n){var h=n.get("elType"),k=n.get("module"===h?"mod_settings":"styling"),e=n.cid;c.push({jobID:e,data:n.toJSON()});k&&0<Object.keys(k).length&&d.push({type:"module"===
h?n.get("mod_name"):h,cid:e,data:k})}}b.liveStylingInstance.setNewRules(d);return b.render_element(c)},change_callback:function(){var c=this.$el;c[0].insertAdjacentHTML("afterbegin",'<span class="sp-preloader tb-preview-component"></span>');this.render_visual().done(function(){c.find(".tb-preview-component").remove();b.Utils.setCompactMode(c[0].getElementsByClassName("module_column"));var d="row"===b.eventName?c.data("cid"):b.beforeEvent.data("cid");b.vent.trigger("dom:change",d,b.beforeEvent,c,b.eventName);
b.Mixins.Builder.update(c);"row"===b.eventName&&b.vent.trigger("dom:builder:change")})},createEl:function(b){var c=this.model.get("elType"),a=e(b);"column"!==c&&(a=a.filter(".module_"+c));var f=a.children(".builder_row_cover");b=a.children("."+c+"-slider");var g=a.data(),n=a[0].getAttribute("style");this.$el.addClass(a[0].getAttribute("class"));for(var h in g)this.el.dataset[h]="object"===typeof g[h]?JSON.stringify(g[h]):g[h];n&&this.el.setAttribute("style",n);0<f.length&&(h=this.$el.children(".builder_row_cover"),
0<h.length?h.replaceWith(f):this.$el.prepend(f));0<b.length&&(c=this.$el.children("."+c+"-slider"),0<c.length?c.replaceWith(b):this.$el.prepend(b))},restoreHtml:function(c){var d="module"===b.activeModel.get("elType")?e(".tb_element_cid_"+b.activeModel.cid):b.liveStylingInstance.$liveStyledElmt;if(0<d.length){var a=c[0].querySelectorAll("[data-cid]"),a=Array.prototype.slice.call(a);a.unshift(c[0]);for(var f=0,g=a.length;f<g;++f){var n=b.Models.Registry.lookup(a[f].getAttribute("data-cid"));n&&n.trigger("change:view",
a[f])}d.replaceWith(c);b.Mixins.Builder.update(c)}}};b.previewVisibility=function(){var c="row"===this.model.get("elType")?this.$el:this.$el.find(".module"),d="row"===this.model.get("elType")?this.model.get("styling"):this.model.get("mod_settings");if(b.isPreview){"hide_all"===d.visibility_all?c.addClass("hide-all"):("hide"===d.visibility_desktop&&c.addClass("hide-desktop"),"hide"===d.visibility_tablet&&c.addClass("hide-tablet"),"hide"===d.visibility_mobile&&c.addClass("hide-mobile"));var a=!1;_.isEmpty(d.custom_parallax_scroll_speed)||
(a=!0,c[0].dataset.parallaxElementSpeed=parseInt(d.custom_parallax_scroll_speed));_.isEmpty(d.custom_parallax_scroll_reverse)||(c[0].dataset.parallaxElementReverse=!0);_.isEmpty(d.custom_parallax_scroll_fade)||(c[0].dataset.parallaxFade=!0);_.isEmpty(d.custom_parallax_scroll_zindex)||(c[0].style.zIndex=d.custom_parallax_scroll_zindex);a&&ThemifyBuilderModuleJs.parallaxScrollingInit(c,!0)}else c.removeClass("hide-desktop hide-tablet hide-mobile hide-all"),_.isEmpty(d.custom_parallax_scroll_speed)||
Rellax.destroy(c[0].dataset.rellaxIndex)};_.extend(b.Views.BaseElement.prototype,b.Mixins.Frontend);b.Views.register_row("visual",{initialize:function(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml);b.vent.on("dom:preview",b.previewVisibility.bind(this))}});b.Views.register_subrow("visual",{initialize:function(){this.listenTo(this.model,"create:element",this.createEl);
this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml)}});b.Views.register_column("visual",{initialize:function(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml)}});b.Views.register_module("visual",{template:wp.template("builder_visual_module_item"),is_ajax_call:!1,_jqueryXhr:!1,templateVisual:function(b){return wp.template("builder-"+
this.model.get("mod_name")+"-content")(b)},attributes:function(){var b=this.model.get("mod_settings"),b="hide_all"===b.visibility_all||"hide"===b.visibility_desktop||"hide"===b.visibility_tablet||"hide"===b.visibility_mobile?" tb_visibility_hidden":"";return{"class":"themify_builder_module_front module-"+this.model.get("mod_name")+" active_module clearfix tb_element_cid_"+this.model.cid+b,"data-cid":this.model.cid}},initialize:function(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,
"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml);this.listenTo(this.model,"custom:preview:live",this.previewLive);this.listenTo(this.model,"custom:preview:refresh",this.previewReload);b.vent.on("dom:preview",b.previewVisibility.bind(this))},createEl:function(b){var c=this.$(".module"),a=c[0].getAttribute("class");c.remove();this.el.insertAdjacentHTML("beforeend",b);this.$el.find(".module").first().addClass(a)},shortcodeToHTML:function(c){function d(f){void 0!==
a._shortcodeXhr&&4!==a._shortcodeXhr&&a._shortcodeXhr.abort();a._shortcodeXhr=e.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_render_element_shortcode",shortcode_data:JSON.stringify(f),tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(f){if(f.success){f=f.data;for(var g=0,c=f.length;g<c;++g){var h=Themify.hash(f[g].key);a.$el.find(".tmp"+h).replaceWith(f[g].html);m[h]=f[g].html;b.Utils.loadContentJs(a.$el,"module")}}}})}for(var a=this,f=[],g=!1,n=themifyBuilder.available_shortcodes,
h=0,k=n.length;h<k;++h)wp.shortcode.replace(n[h],c,function(a){a=wp.shortcode.string(a);var b=Themify.hash(a);void 0===m[b]?(f.push(a),b='<span class="tmp'+b+'">[loading shortcode...]</span>'):b=m[b];g=!0;c=c.replace(a,b)});g&&0<f.length&&d(f);return{content:c,found:g}},previewLive:function(c,d,a){this.is_ajax_call=!1;this._jqueryXhr&&4!==this._jqueryXhr&&this._jqueryXhr.abort();c.cid=a?a:b.activeModel.cid;var f=this.templateVisual(c),g=300;if(!this.is_ajax_call){!0===d&&(d=this.shortcodeToHTML(f),
d.found&&(g=1E3,f=d.content));var n=this.$(".module");n.replaceWith(f);this.$el.children("style").remove();n=this.$(".module");b.VisualCache[c.cid]&&n.addClass(b.VisualCache[c.cid]);a||(b.liveStylingInstance.$liveStyledElmt=n,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){b.Utils.loadContentJs(n,"module")},g))}},previewReload:function(c){function d(f){var g=a.$el.find(".module").first();g.replaceWith(f);g=a.$el.find(".module").first();b.VisualCache[a.model.cid]&&g.addClass(b.VisualCache[a.model.cid]);
b.liveStylingInstance.$liveStyledElmt=g;b.Utils.loadContentJs(g,"module");a.$el.find(".tb-preview-component").remove()}var a=this;this._jqueryXhr&&4!==this._jqueryXhr&&this._jqueryXhr.abort();this.is_ajax_call=!0;a.el.insertAdjacentHTML("afterbegin",'<span class="tb-preview-component sp-preloader"></span>');var f=this.model.get("mod_name");delete c.cid;c["module_"+f+"_slug"]=f;c=JSON.stringify(c);var g=Themify.hash(c);if(void 0!==l[g]&&void 0!==l[g].data)c=l[g].cid,this.model.cid!==c&&(l[g].data=
l[g].data.replace(new RegExp(f+"-"+c+"-"+c,"g"),f+"-"+this.model.cid+"-"+this.model.cid),l[g].cid=this.model.cid),d(l[g].data);else return l[g]={},this._jqueryXhr=e.ajax({type:"POST",url:themifyBuilder.ajaxurl,data:{action:"tb_load_module_partial",tb_post_id:this.$el.closest(".themify_builder_content").data("postid"),tb_cid:this.model.cid,tb_module_slug:f,tb_module_data:c,tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(f){l[g].data=f;l[g].cid=a.model.cid;d(f)},error:function(){a.$el.removeClass("tb-preview-loading")}}),
this}});b.bootstrap=function(c,d){var a=[],f=c?!0:!1,g=[];c||(c=b.Models.Registry.items);for(var n in c){var h=b.Models.Registry.items[n];var k=h.toJSON();h=k.elType;var e=k["module"===h?"mod_settings":"styling"];if(e&&0<Object.keys(e).length)!0===f&&g.push({type:"module"===h?k.mod_name:h,cid:n,data:e});else if("module"!==h)continue;"module"===h&&"tile"!==k.mod_name&&"ajax"!==themifyBuilder.modules[k.mod_name].type?(h=b.Models.Registry.lookup(n),h.trigger("custom:preview:live",k.mod_settings,"accordion"===
k.mod_name||"box"===k.mod_name||"feature"===k.mod_name||"tab"===k.mod_name||"text"===k.mod_name||"plain-text"===k.mod_name||"pointers"===k.mod_name||"pro-image"===k.mod_name||"countdown"===k.mod_name||"button"===k.mod_name||"pro-slider"===k.mod_name||"timeline"===k.mod_name,n)):("column"===h?delete k.modules:"row"!==h&&"module"!==h&&"subrow"!==h||delete k.cols,a.push({jobID:n,data:k}))}!0===f&&b.liveStylingInstance.setNewRules(g);this.batch_rendering(a,0,360,d)};b.batch_rendering=function(c,d,a,f){if(d>=
c.length)e.isFunction(f)&&f.call(this);else{var g=c.slice(d,d+a);this.render_element(g).done(function(){b.batch_rendering(c,d+=a,a,f)})}};b.render_element=function(c){return e.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_render_element",batch:JSON.stringify(c),tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(c){for(var a in c)b.Models.Registry.lookup(a).trigger("create:element",c[a])}})};b.render=function(){for(var c=[document.getElementById("themify_builder_content-"+
themifyBuilder.post_ID)],d=0;1>d;++d){var a=c[d].dataset.postid,f=c[d].getElementsByTagName("script")[0],g=window["builderdata_"+a]?window["builderdata_"+a].data:[];0===g.length&&(g={});window["builderdata_"+a]=null;f&&f.parentNode.removeChild(f);b.id=a;b.Instances.Builder[d]=new b.Views.Builder({el:"#themify_builder_content-"+a,collection:new b.Collections.Rows(g),type:"visual"});b.Instances.Builder[d].render();b.bootstrap(null,function(){b.toolbar.el.style.display="block";window.top.jQuery("body").trigger("themify_builder_ready");
b.Utils.loadContentJs();top_iframe.body.insertAdjacentHTML("beforeend",themifyBuilder.data);themifyBuilder.data=null;b.vent.trigger("dom:builder:init",!0)})}b.id=!1};e("body").one("builderiframeloaded.themify",function(c,d){b.iframe=d;tbLocalScript.isAnimationActive&&setTimeout(function(){Themify.LoadCss(tbLocalScript.builder_url+"/css/animate.min.css")},1);b.toolbar=new b.Views.Toolbar({el:"#tb_toolbar"});setTimeout(function(){b.liveStylingInstance=new p;b.liveStylingInstance.getRules()},50);setTimeout(function(){b.render()},
1);setTimeout(function(){b.Views.bindEvents()},1);b.Forms.bindEvents()});var p=function(c){function d(){this.$context=c("#themify_builder_lightbox_parent",top_iframe);this.group=this.type=this.prefix=this.isInit=!1;this.styleName="themify-builder-component-customize";this.style_tab="#themify_builder_options_styling";this.generatedPrefix=[];this.generatedCache=[];this.module_rules=[];this.rulesCache=[];this.tempData=[];this.prevData=[];this.currentSheet=null;var a=this;setTimeout(function(){a.InitInlineStyles();
a.initModChange();a.before_close();a.bindLightboxForm()},1)}d.prototype.InitInlineStyles=function(){var a='<style type="text/css" id="'+this.styleName+'-desktop"></style>',f;for(f in themifyBuilder.breakpoints)var g=b.Utils.getBPWidth(f)+"px",a=a+('<style media="screen and (max-width:'+g+')" type="text/css" id="'+this.styleName+"-"+f+'"></style>');document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",a)};d.prototype.init=function(a){this.type=b.activeModel.get("elType");this.$liveStyledElmt=
c(".tb_element_cid_"+b.activeModel.cid);this.prefix=".themify_builder .tb_element_cid_"+b.activeModel.cid;"module"===this.type?(this.$liveStyledElmt=this.$liveStyledElmt.children(".module"),this.prefix+=" ",this.group=b.activeModel.get("mod_name")):("row"!==this.type&&"sub-column"!==b.activeModel.get("component_name")&&(this.prefix=".themify_builder_content"+this.prefix),this.group=this.type);this.currentStyleObj="object"===typeof a?a:{};this.tempData=[];this.tempData[b.activeBreakPoint]=[];this.rulesCache[b.activeBreakPoint]||
(this.rulesCache[b.activeBreakPoint]=[]);this.currentSheet=this.getSheet(b.activeBreakPoint);this.isInit=!0};d.prototype.getRules=function(){var a=function(){try{var a=localStorage.getItem("tb_rules"),f="";if(!a)return!1;var a=JSON.parse(a),b;for(b in themifyBuilder.modules)f+=b;return a.ver.toString()!==tbLocalScript.version.toString()||a.h!==Themify.hash(f)?!1:JSON.parse(a.val)}catch(k){}return!1}();if(a)this.module_rules=a;else{var f=this;c.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",
data:{action:"tb_load_rules",tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(a){if(a){try{var b="",g;for(g in themifyBuilder.modules)b+=g;var c={val:JSON.stringify(a),ver:tbLocalScript.version,h:Themify.hash(b)};localStorage.setItem("tb_rules",JSON.stringify(c))}catch(u){}f.module_rules=a}}})}};d.prototype.setNewRules=function(a){var f=this;return c.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{data:JSON.stringify(a),action:"tb_set_newrules",tb_load_nonce:themifyBuilder.tb_load_nonce},
success:function(a){if(a)for(var b in a)for(var g=f.getSheet(b),k=g.cssRules?g.cssRules:g.rules,d=0,e=a[b].length;d<e;++d)a[b][d]=c.trim(a[b][d]),a[b][d]&&g.insertRule(a[b][d],k.length)}})};d.prototype.setLiveStyle=function(a,f,g){g||(g=[""]);for(var c="",h=a,k=this.currentSheet.cssRules?this.currentSheet.cssRules:this.currentSheet.rules,d=0,e=g.length;d<e;++d)c+=this.prefix+g[d],d!==e-1&&(c+=",");-1!==a.indexOf("-")&&(h=a.toLowerCase().split("-"),h=h[0]+h[1].charAt(0).toUpperCase()+h[1].slice(1));
c=c.replace(/\s{2,}/g," ").replace(/\s*>\s*/g,">");g=Themify.hash(c);d=f;if(void 0!==this.rulesCache[b.activeBreakPoint][g])e=this.rulesCache[b.activeBreakPoint][g];else a:{for(var e=0,l=k.length;e<l;++e)if(c===k[e].selectorText)break a;e=!1}!1===f&&(f="");!1!==e&&k[e]?k[e].style[h]=f:(e=k.length,this.currentSheet.insertRule(c+"{"+a+":"+f+";}",e));this.rulesCache[b.activeBreakPoint][g]=e;void 0===this.tempData[b.activeBreakPoint][e]&&(this.tempData[b.activeBreakPoint][e]=[]);this.tempData[b.activeBreakPoint][e][h]=
f;""===d&&this.removeGenerated(c,h,e)};d.prototype.initModChange=function(){var a=this;c("body").on("themify_builder_change_mode",function(f,b,c){a.isInit&&(void 0===a.tempData[c]&&(a.tempData[c]=[]),void 0===a.rulesCache[c]&&(a.rulesCache[c]=[]),a.currentSheet=a.getSheet(c))})};d.prototype.revertRules=function(){var a=void 0!==this.prevData[b.activeModel.cid]?this.prevData[b.activeModel.cid]:!1,f;for(f in this.tempData){var g=this.getSheet(f),g=g.cssRules?g.cssRules:g.rules,c;for(c in this.tempData[f])if(g[c])for(var h in this.tempData[f][c]){var d=
"";a&&void 0!==a[f]&&void 0!==a[f][c]&&void 0!==a[f][c][h]&&(d=a[f][c][h]);g[c].style[h]=d}}this.tempData=[]};d.prototype.removeGenerated=function(a,f,c){function g(a,f,b){for(var c=0,d=a.length;c<d;++c)if(f===a[c].type)if(!1!==b&&-1!==a[c].conditionText.indexOf(b)){var e=g(a[c].cssRules?a[c].cssRules:a[c].rules,CSSRule.STYLE_RULE,!1);if(void 0!==e)return[c,e]}else if(!1===b&&m.generatedPrefix[h]===a[c].selectorText.replace(/\s{2,}/g," ").replace(/\s*\,\s*/g,",").replace(/\s*>\s*/g,">"))return c}
var h=b.activeModel.cid;if(void 0!==b.VisualCache[h]){var d=this.$liveStyledElmt.closest(".themify_builder_content").data("postid");d=document.getElementById("themify-builder-"+d+"-generated-css");if(null!==d){if(d=d.sheet,d=d.cssRules?d.cssRules:d.rules,void 0===this.generatedPrefix[h]){var e="";if("column"===this.type&&"sub-column"!==b.activeModel.get("component_name")){var l=this.$liveStyledElmt.closest(".module_row").data("cid");void 0!==b.VisualCache[l]&&(e=b.VisualCache[l].split(" ")[1])}else"subrow"===
this.type?(l=this.$liveStyledElmt.closest(".module_column"),void 0!==b.VisualCache[l.data("cid")]&&(e=b.VisualCache[l.data("cid")].split(" ")[0],l=l.closest(".module_row").data("cid"),e=void 0!==b.VisualCache[l]?b.VisualCache[l].split(" ")[1]+" ."+e:"")):"module"===this.type&&(e="themify_builder");""!==e&&(e="."+e+" ");e=e+"."+b.VisualCache[h].replace(" ",".");this.generatedPrefix[h]=a.replace(new RegExp(this.prefix,"ig"),e).replace(/\s{2,}/g," ").replace(/\s*\,\s*/g,",").replace(/\s*>\s*/g,">")}}else{delete b.VisualCache[h];
this.generatedPrefix[h];return}}var m=this;if(void 0!==this.generatedPrefix[h]){void 0===this.generatedCache[b.activeBreakPoint]&&(this.generatedCache[b.activeBreakPoint]=[]);e=CSSRule.STYLE_RULE;l=Themify.hash(this.generatedPrefix[h]);a=this.generatedCache[b.activeBreakPoint][l];var p=!1;void 0===a&&("desktop"!==b.activeBreakPoint&&(p=b.Utils.getBPWidth(b.activeBreakPoint)+"px",e=CSSRule.MEDIA_RULE),this.generatedCache[b.activeBreakPoint][l]=g(d,e,p),a=this.generatedCache[b.activeBreakPoint][l]);
void 0!==a&&(e="",void 0!==a[1]?(d=d[a[0]].cssRules?d[a[0]].cssRules:d[a[0]].rules,e=d[a[1]].style[f],d[a[1]].style[f]=""):"desktop"===b.activeBreakPoint&&(e=d[a].style[f],d[a].style[f]=""),""!==e&&(void 0===this.prevData[h]&&(this.prevData[h]=[]),void 0===this.prevData[h][b.activeBreakPoint]&&(this.prevData[h][b.activeBreakPoint]=[]),void 0===this.prevData[h][b.activeBreakPoint][c]&&(this.prevData[h][b.activeBreakPoint][c]=[]),this.prevData[h][b.activeBreakPoint][c][f]=e))}};d.prototype.remember=
function(a){this.prevData[a]=c.extend(!0,{},this.tempData)};d.prototype.getRememberedStyles=function(){return this.tempData};d.prototype.getSheet=function(a){return document.getElementById(this.styleName+"-"+a).sheet};d.prototype.reset=function(){var a=Object.keys(themifyBuilder.breakpoints);a.push("desktop");for(var f in a)c("link#"+this.styleName+"-"+f).remove();this.InitInlineStyles();this.rulesCache=[];this.tempData=[];this.prevData=[];this.generatedPrefix=[];this.generatedCache=[]};d.prototype.doUndo=
function(a,f){for(var b in a){var c=this.getSheet(b),c=c.cssRules?c.cssRules:c.rules,d;for(d in a[b])if(c[d])for(var e in a[b][d])c[d].style[e]=f?"":a[b][d][e]}};d.prototype.before_close=function(){var a=this;c("body").on("themify_builder_lightbox_before_close",function(){a.isInit=!1;if(null!==b.activeModel&&(a.$liveStyledElmt.removeClass("animated"),!b.saving&&(a.revertRules(),"module"!==a.type))){var f=b.activeModel.get("styling");"slider"===f.background_type&&f.background_slider&&a.bindBackgroundSlider()}})};
d.prototype.bindColors=function(){var a=this;c("body").on("themify_builder_color_picker_change",function(b,c,d,e){a.isInit&&("cover_color"===c||"cover_color_hover"===c?a.addOrRemoveComponentOverlay(c,e):d.hasClass("border_color")?a.bindMultiFields(d):(b=a.getValue(c))&&a.setLiveStyle(b.prop,e,b.selector))})};d.prototype.overlayType=function(a,f){var g="color"===f||"hover_color"===f;a=g?a.replace("-type",""):"cover_color_hover-type"===a?"cover_gradient_"+f.replace("_","-")+"-type":a.replace("color",
"gradient-gradient");var d=this.$context.find("#"+a);if(g){if(g=d.val())if(d.data("minicolors-initialized"))g=d.minicolors("rgbaString");else{var e=d.data("opacity");""!==e&&void 0!==e&&"1"!=e&&"0.99"!=e&&(g=b.Utils.toRGBA(g+"_"+e))}c("body").trigger("themify_builder_color_picker_change",[a,d,g])}else d.trigger("change")};d.prototype.bindBackgroundGradient=function(a,b){if(this.isInit){var c=this.getValue(a);c&&("cover_gradient"!==a&&"cover_gradient_hover"!==a||this.setLiveStyle("background-color",
!1,c.selector),this.setLiveStyle(c.prop,b,c.selector))}};d.prototype.addOrRemoveComponentOverlay=function(a,b){var f=this.getComponentBgOverlay(),d=0!==f.length;d||(f=c("<div/>",{"class":"builder_row_cover"}));if("cover_gradient"!==a&&"cover_gradient_hover"!==a){var e=this.getValue(a);this.setLiveStyle("background-image","none",e.selector);this.setLiveStyle(e.prop,b,e.selector)}else this.bindBackgroundGradient(a,b);d||(d=this.getComponentBgSlider(),0< !d.length&&(d=this.$liveStyledElmt.children("column"!==
this.type?"."+this.type+"_inner":".themify_module_holder")),f.insertBefore(d))};d.prototype.bindMultiFields=function(a,f){function d(a,c){if(!r&&"row"===k.type&&""===tbLocalScript.fullwidth_support&&(t&&("padding"===c||"margin"===c)||"padding-left"===c||"padding-right"===c||"margin-left"===c||"margin-right"===c)){var f=c.split("-"),d=b.activeBreakPoint+"-"+f[0];if(t)a=a+","+a;else{var e=k.$liveStyledElmt.data(d),e=e?e.split(","):[];"left"===f[1]?e[0]=a:e[1]=a;a=e.join(",")}k.$liveStyledElmt.attr("data-"+
d,a).data(d,a);ThemifyBuilderModuleJs.setupFullwidthRows(k.$liveStyledElmt)}}function e(a){var b=c.trim(a.val());""!==b&&(b=parseFloat(b),isNaN(b)?b="":0!==b&&(b+=k.$context.find("#"+a.prop("id")+"_unit").val()));return b}function h(a){var b=a.closest("li");a=parseFloat(c.trim(b.find(".border_width").val()));var f=b.find(".border_style").val(),b=b.find(".minicolors-input"),d=c.trim(b.val()),b=d&&b.data("minicolors-initialized")?b.minicolors("rgbaString"):d;"none"===f?a=f:isNaN(a)||""===a||""===b?
a="":(-1===b.indexOf("rgb")&&-1===b.indexOf("#")&&(b="#"+b),a=a+"px "+f+" "+b);return a}var k=this;var l=a.prop("id");var m=k.getValue(l);if(m){l=a.closest(".tb_seperate_items");var p=m.prop.split("-")[0];var r=l.hasClass("tb_borders");var t="1"===l.attr("data-checked");if(t){var q=r?h(a):e(a);k.setLiveStyle(p,q,m.selector);d(q,p)}else f?(k.setLiveStyle(p,"",m.selector),l.find(".tb_multi_field").each(function(){q=r?h(c(this)):e(c(this));var a=k.getValue(c(this).prop("id")).prop;k.setLiveStyle(a,q,
m.selector);d(q,a)})):(q=r?h(a):e(a),k.setLiveStyle(m.prop,q,m.selector),d(q,m.prop))}};d.prototype.bindRowWidthHeight=function(){var a=this;this.$context.on("change",'input[name="row_height"]',function(){var b=c(this).val();"fullheight"===b?a.$liveStyledElmt.addClass(b):a.$liveStyledElmt.removeClass("fullheight");c(window).trigger("tfsmartresize.tfVideo")}).on("change",'input[name="row_width"]',function(){var b=c(this).val(),d=ThemifyBuilderModuleJs;"fullwidth"===b?(a.$liveStyledElmt.removeClass("fullwidth").addClass("fullwidth_row_container"),
d.setupFullwidthRows(a.$liveStyledElmt)):"fullwidth-content"===b?(a.$liveStyledElmt.removeClass("fullwidth_row_container").addClass("fullwidth"),d.setupFullwidthRows(a.$liveStyledElmt)):a.$liveStyledElmt.removeClass("fullwidth fullwidth_row_container").css({"margin-left":"","margin-right":"","padding-left":"","padding-right":"",width:""});c(window).trigger("tfsmartresize.tfVideo")})};d.prototype.bindParralax=function(){var a=this;this.$context.on("keyup","#custom_parallax_scroll_zindex",function(){var b=
parseInt(c(this).val());isNaN(b)&&(b="");a.$liveStyledElmt[0].style.zIndex=b})};d.prototype.bindAnimation=function(){var a=this;this.$context.on("change","#animation_effect,#animation_effect_delay,#animation_effect_repeat",function(){var b=a.getStylingVal("animation_effect");b&&a.$liveStyledElmt.removeClass(b+" wow animated").css({"animation-name":"","animation-delay":"","animation-iteration-count":""});var c=a.$context.find("#animation_effect").val();a.setStylingVal("animation_effect",c);if(c){var b=
parseFloat(a.$context.find("#animation_effect_delay").val()),d=parseInt(a.$context.find("#animation_effect_repeat").val());a.$liveStyledElmt.css({"animation-delay":0<b&&!isNaN(b)?b+"s":"","animation-iteration-count":0<d&&!isNaN(d)?d:""});setTimeout(function(){a.$liveStyledElmt.addClass(c+" animated")},1)}})};d.prototype.bindAdditionalCSSClass=function(){var a=this;this.$context.on("keyup","#custom_css_row, #custom_css_column",function(){var b=this.id,d=a.getStylingVal(b);a.$liveStyledElmt.removeClass(d);
d=c(this).val();a.setStylingVal(b,d);a.$liveStyledElmt.addClass(d)})};d.prototype.bindRowAnchor=function(){var a=this;this.$context.on("keyup","#row_anchor",function(){var b=a.getStylingVal("row_anchor");a.$liveStyledElmt.removeClass(a.getRowAnchorClass(b));b=c.trim(c(this).val());a.setStylingVal("row_anchor",b);""!==b&&a.$liveStyledElmt.addClass(a.getRowAnchorClass(b))})};d.prototype.getRowAnchorClass=function(a){return 0<a.length?"tb_section-"+a:""};d.prototype.getStylingVal=function(a){return void 0!==
this.currentStyleObj[a]?this.currentStyleObj[a]:""};d.prototype.setStylingVal=function(a,b){this.currentStyleObj[a]=b};d.prototype.bindBackgroundMode=function(a){var b=this.getStylingVal("background_repeat");0<a.length?(0<b.length&&this.$liveStyledElmt.removeClass(b),this.setStylingVal("background_repeat",a),this.$liveStyledElmt.addClass(a)):this.$liveStyledElmt.removeClass(b);this.$liveStyledElmt.css({"background-size":"","background-position":""})};d.prototype.bindBackgroundPosition=function(a){var b=
this.getStylingVal("background_position");b&&0<b.length&&this.$liveStyledElmt.removeClass("bg-position-"+b);a&&0<a.length&&(this.setStylingVal("background_position",a),this.$liveStyledElmt.addClass("bg-position-"+a))};d.prototype.bindBackgroundSlider=function(){function a(a){a=c(a);var b=d.getComponentBgOverlay();0<b.length?b.after(a):"row"===d.type?d.$liveStyledElmt.children(".themify_builder_row_top").after(a):d.$liveStyledElmt.prepend(a);ThemifyBuilderModuleJs.backgroundSlider(c(a[0]))}var d=this,
e=c.trim(d.$context.find("#background_slider").val());d.removeBgSlider();if(e){void 0===d.cahce&&(d.cahce={});var e={shortcode:encodeURIComponent(e),mode:d.$context.find("#background_slider_mode").val(),size:d.$context.find("#background_slider_size").val()},l="",h;for(h in e)l+=Themify.hash(h+e[h]);void 0!==this.cahce[l]?a(this.cahce[l]):(e.type=d.type,e.order=b.activeModel.cid,c.post(themifyBuilder.ajaxurl,{nonce:themifyBuilder.tb_load_nonce,action:"tb_slider_live_styling",tb_background_slider_data:e},
function(b){10>b.length||(d.cahce[l]=b,a(b))}))}};d.prototype.VideoOptions=function(){var a=this;this.$context.on("change",'input[name="background_video_options"]',function(){var b=a.$liveStyledElmt.find(".big-video-wrap").first(),d=c(this).val(),e=c(this).is(":checked"),h="";b.hasClass("themify_ytb_wrapper")?(b=a.$liveStyledElmt,h="ytb"):b.hasClass("themify-video-vmieo")?(b=$f(b.children("iframe")[0]))&&(h="vimeo"):(b=a.$liveStyledElmt.data("plugin_ThemifyBgVideo"),h="local");"mute"===d?e?("ytb"===
h?b.ThemifyYTBMute():"vimeo"===h?b.api("setVolume",0):"local"===h&&b.muted(!0),a.$liveStyledElmt.data("mutevideo","mute")):("ytb"===h?b.ThemifyYTBUnmute():"vimeo"===h?b.api("setVolume",1):"local"===h&&b.muted(!1),a.$liveStyledElmt.data("mutevideo","")):"unloop"===d&&(e?("vimeo"===h?b.api("setLoop",0):"local"===h&&b.loop(!1),a.$liveStyledElmt.data("unloopvideo","")):("vimeo"===h?b.api("setLoop",1):"local"===h&&b.loop(!0),a.$liveStyledElmt.data("unloopvideo","loop")))})};d.prototype.bindBackgroundTypeRadio=
function(a){"image"===a||"gradient"===a?(this.removeBgSlider(),this.removeBgVideo(),"image"===a?this.setLiveStyle("background-image","none"):a="module"===this.type?"image-gradient-angle":a+"-gradient-angle"):"video"===a?this.removeBgSlider():this.removeBgVideo();this.$context.find("#background_"+a).trigger("change")};d.prototype.setData=function(a,b,c){if(a=this.getValue(a))""===b&&(b=a.prop),this.setLiveStyle(b,c,a.selector)};d.prototype.bindChangesEvent=function(){var a=this;a.$context.on("change",
a.style_tab+" select,"+a.style_tab+" textarea,"+a.style_tab+" input.themify-builder-uploader-input,"+a.style_tab+' input[type="radio"]',function(b){if(a.isInit&&!c(this).hasClass("minicolors-input")&&!c(this).hasClass("color_opacity")&&!c(this).hasClass("themify-gradient-type")){var d=c.trim(c(this).val()),e=c(this).is(":radio"),f=!e&&c(this).is("select"),k=!f&&e?c(this).parent(".tb_lb_option").prop("id"):c(this).prop("id");if(f)if(c(this).hasClass("font-family-select"))"default"!==d&&void 0===ThemifyBuilderCommon.safe_fonts[d]?
ThemifyBuilderCommon.loadGoogleFonts([d.split(" ").join("+")+":400,700:latin,latin-ext"]):"default"===d&&(d="");else if(c(this).hasClass("tb_unit"))a.$context.find("#"+k.replace("_unit","")).trigger("keyup");else{if(c(this).hasClass("border_style")){a.bindMultiFields(c(this),b.isTrigger);return}if("background_repeat"===k){a.bindBackgroundMode(d);return}if("background_position"===k){a.bindBackgroundPosition(d);return}if("module"!==a.type&&("background_slider_size"===k||"background_slider_mode"===k)){a.bindBackgroundSlider();
return}}else if(e){c(this).is(":checked")||(d="");if("background_type"===k||"background_image-type"===k){a.bindBackgroundTypeRadio(d);return}if("cover_color-type"===k||"cover_color_hover-type"===k){a.overlayType(k,d);return}}else if(c(this).hasClass("themify-builder-uploader-input")){if("background_video"===k)return 0<d.length?(a.$liveStyledElmt.data("fullwidthvideo",d),ThemifyBuilderModuleJs.fullwidthVideo(a.$liveStyledElmt)):a.removeBgVideo(),!1;d=d?"url("+d+")":"none"}else if("module"!==a.type&&
"background_slider"===k){a.bindBackgroundSlider();return}a.setData(k,"",d)}}).on("keyup",a.style_tab+' input[type="text"]',function(b){if(!c(this).hasClass("minicolors-input")&&!c(this).hasClass("color_opacity")){var d=c.trim(c(this).val()),e=c(this).prop("id");c(this).hasClass("border_width")||c(this).hasClass("tb_multi_field")?a.bindMultiFields(c(this),b.isTrigger):(d&&(b=a.$context.find(a.style_tab+" #"+e+"_unit"),0<b.length&&(d+=b.val()?b.val():"px")),a.setData(e,"",d))}})};d.prototype.getValue=
function(a){return this.isInit?void 0!==this.module_rules[this.group]&&void 0!==this.module_rules[this.group][a]?this.module_rules[this.group][a]:!1:!1};d.prototype.bindLightboxForm=function(){this.bindChangesEvent();this.bindColors();this.bindAnimation();this.VideoOptions();this.bindRowAnchor();this.bindRowWidthHeight();this.bindParralax();this.bindAdditionalCSSClass()};d.prototype.getComponentBgOverlay=function(){return this.$liveStyledElmt.children(".builder_row_cover")};d.prototype.getComponentBgSlider=
function(){var a="colum"===this.type&&"sub-column"===b.activeModel.get("component_name")?"sub-col":"colum"===this.type?"col":this.type;return this.$liveStyledElmt.children("."+a+"-slider")};d.prototype.removeBgSlider=function(){this.getComponentBgSlider().add(this.$liveStyledElmt.children(".tb_backstretch")).remove();this.$liveStyledElmt.css({position:"",background:"","z-index":""})};d.prototype.removeBgVideo=function(){this.$liveStyledElmt.removeAttr("data-fullwidthvideo").data("fullwidthvideo",
"").children(".big-video-wrap").remove()};return d}(jQuery)})(jQuery);
